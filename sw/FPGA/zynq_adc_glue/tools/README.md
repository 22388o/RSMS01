# Tools

## afe5801_conf.py

`afe5801_conf.py` configures the ADC by writing to its registers over SPI. It resets the ADC to its default configuration and then, if an argument is passed, enables one of test patterns to be output on ADC data lines. The argument is the value, in binary, to be written to the appropriate register bitrange. See [AFE5801 datasheet](https://github.com/toxygen/DENGS/tree/master/HW/modules/ADCoctoSPI01A/DOC/pdf/AFE5801.pdf), p. 24, for the options.

### Example

Datasheet says: PATTERN_MODE equal to 101 makes the output of the device toggle between two consecutive codes. On the nth sample clock, the data is 0000 0000 0000, and on the following one (nth + 1), it is 1111 1111 1111.

	root@localhost:~# ./afe5801_conf.py 101
	resetting
	{'port': None}
	(u'00A59CB6', <type 'unicode'>)
	setting PATTERN_MODE to 0x5
	        reg[1] = 0x0
	        reg[2] = 0xa000
	        reg[3] = 0x0
	        reg[4] = 0x0
	        reg[5] = 0x0
	        reg[6] = 0x0
	root@localhost:~# ./dma_test -b 256 -f - | xxd -g 2 -e -b -c 16
	pl_design_id=0xd5170003
	(after reset) s2mm_dmasr=0x10009
	(after s2mm_dmacr write) s2mm_dmasr=0x10008
	transferred=0x100 counter=0x000029ea overflow=0x000027d9
	00000000: 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000  ................
	00000010: 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111  ................
	00000020: 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000  ................
	00000030: 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111  ................
	00000040: 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000  ................
	00000050: 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111  ................
	00000060: 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000  ................
	00000070: 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111  ................
	00000080: 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000  ................
	00000090: 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111  ................
	000000a0: 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000  ................
	000000b0: 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111  ................
	000000c0: 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000  ................
	000000d0: 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111  ................
	000000e0: 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000 0000000000000000  ................
	000000f0: 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111 1111000011111111  ................
